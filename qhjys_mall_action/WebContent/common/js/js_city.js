function cityObj(b){this.province=document.getElementById(b.pid);this.city=document.getElementById(b.cid);this.provinceName=b.pid.replace(new RegExp("\\.","gm"),"\\.");this.cityName=b.cid.replace(new RegExp("\\.","gm"),"\\.");this.defaultProvince=b.pTxt;this.defaultCity=b.cTxt;var c=this;var a="";this.path=b.path?b.path:a;this.init=function(d,e){this.ajaxCity(1,d,e);if(!d&&defaultCity){$("#"+this.cityName).empty();$("#"+this.cityName).append((c.defaultCity?'<option value="" >'+c.defaultCity+"</option>":""))}};this.changeProvince=function(){var d=c.province.options[c.province.selectedIndex].value;c.ajaxCity(2,d,null)};this.ajaxCity=function(e,d,f){b="act="+e+"&provinceKey="+window.encodeURIComponent(d)+"&cityKey="+window.encodeURIComponent(f);$.ajax({url:c.path+"/jsp/city.jsp",type:"GET",dataType:"html",timeout:1000,cache:false,async:false,data:b,error:function(){},success:function(g){if(e==1){var h=g.split("###");$("#"+c.provinceName).append((c.defaultProvince?'<option value="" >'+c.defaultProvince+"</option>":"")+h[0]);$("#"+c.cityName).append((c.defaultCity?'<option value="" >'+c.defaultCity+"</option>":"")+h[1])}else{if(e==2){$("#"+c.cityName).empty();$("#"+c.cityName).append((c.defaultCity?'<option value="" >'+c.defaultCity+"</option>":"")+g)}}}})};this.province.onchange=this.changeProvince;this.init(b.pkey,b.ckey)}function upDigit(b){var h=["角","分"];var e=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"];var g=[["元","万","亿"],["","拾","佰","仟"]];var f=b<0?"欠":"";b=Math.abs(b);var k="";for(var d=0;d<h.length;d++){k+=(e[Math.floor(b*10*Math.pow(10,d))%10]+h[d]).replace(/零./,"")}k=k||"整";b=Math.floor(b);for(var d=0;d<g[0].length&&b>0;d++){var a="";for(var c=0;c<g[1].length&&b>0;c++){a=e[b%10]+g[1][c]+a;b=Math.floor(b/10)}k=a.replace(/(零.)*零$/,"").replace(/^$/,"零")+g[0][d]+k}return f+k.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}function formatMoney(e,d){if(/[^0-9\.]/.test(e)){return"0"}if(e==null||e==""){return"0"}e=e.toString().replace(/^(\d*)$/,"$1.");e=(e+"00").replace(/(\d*\.\d\d)\d*/,"$1");e=e.replace(".",",");var c=/(\d)(\d{3},)/;while(c.test(e)){e=e.replace(c,"$1,$2")}e=e.replace(/,(\d\d)$/,".$1");if(d==0){var b=e.split(".");if(b[1]=="00"){e=b[0]}}return e}Date.prototype.toFomatorString=function(a){var b=a.toUpperCase();if(b.indexOf("YYYY")>-1){b=b.replace("YYYY",this.getYear())}if(b.indexOf("MM")>-1){b=b.replace("MM",this.getMonth()+1)}if(b.indexOf("DD")>-1){b=b.replace("DD",this.getDate())}if(b.indexOf("HH")>-1){b=b.replace("HH",this.getHours())}if(b.indexOf("MI")>-1){b=b.replace("MI",this.getMinutes())}if(b.indexOf("SS")>-1){b=b.replace("SS",this.getSeconds())}if(b.indexOf("SI")>-1){b=b.replace("SI",this.getMilliseconds())}return b};String.prototype.toDate=function(){var a=this.toString();a=a.replace(/-/g,"/");var b=new Date(Date.parse(a));return b};function setEndDate(a,f){if(!f||f==""){return""}var i=a;var e=getMaxDay(i.getFullYear(),i.getMonth()+1);var g=i.getDate();var h;if((i.getMonth()+1+parseInt(f))%12>0){h=(i.getMonth()+1+parseInt(f))%12}else{h=i.getMonth()+1+parseInt(f)}i.setMonth(i.getMonth()+parseInt(f));var b=getMaxDay(i.getFullYear(),h);var c;if(e<=b){c=i.getFullYear().toString()+"-"+(i.getMonth()+1).toString()+"-"+g}if(e>b){if(g<b){c=i.getFullYear().toString()+"-"+(h)+"-"+g}else{c=i.getFullYear().toString()+"-"+(h)+"-"+b}}return c}function getMaxDay(a,b){if(b==4||b==6||b==9||b==11){return"30"}if(b==2){if(a%4==0&&a%100!=0||a%400==0){return"29"}else{return"28"}}return"31"}function changeDeadlineNum(a){$("#deadlineNum").empty();$("#repayment").empty();if(a=="0"){$("#repayment").append("<option value='0'>一次性还款</option>");$("#deadlineNum").append("<option value='3'>3天</option>");$("#deadlineNum").append("<option value='4'>4天</option>");$("#deadlineNum").append("<option value='5'>5天</option>");$("#deadlineNum").append("<option value='6'>6天</option>");$("#deadlineNum").append("<option value='7'>7天</option>");$("#deadlineNum").append("<option value='8'>8天</option>");$("#deadlineNum").append("<option value='9'>9天</option>");$("#deadlineNum").append("<option value='10'>10天</option>");$("#deadlineNum").append("<option value='11'>11天</option>");$("#deadlineNum").append("<option value='12'>12天</option>");$("#deadlineNum").append("<option value='13'>13天</option>");$("#deadlineNum").append("<option value='14'>14天</option>");$("#deadlineNum").append("<option value='15'>15天</option>");$("#deadlineNum").append("<option value='16'>16天</option>");$("#deadlineNum").append("<option value='17'>17天</option>");$("#deadlineNum").append("<option value='18'>18天</option>");$("#deadlineNum").append("<option value='19'>19天</option>");$("#deadlineNum").append("<option value='20'>20天</option>");$("#deadlineNum").append("<option value='21'>21天</option>");$("#deadlineNum").append("<option value='22'>22天</option>");$("#deadlineNum").append("<option value='23'>23天</option>");$("#deadlineNum").append("<option value='24'>24天</option>");$("#deadlineNum").append("<option value='25'>25天</option>");$("#deadlineNum").append("<option value='26'>26天</option>");$("#deadlineNum").append("<option value='27'>27天</option>");$("#deadlineNum").append("<option value='28'>28天</option>");$("#deadlineNum").append("<option value='29'>29天</option>");$("#deadlineNum").append("<option value='30'>30天</option>")}else{if(a=="1"){$("#repayment").append("<option value='2'>按月付息到期还本</option>");$("#deadlineNum").append("<option value='2'>2月</option>");$("#deadlineNum").append("<option value='3'>3月</option>");$("#deadlineNum").append("<option value='4'>4月</option>");$("#deadlineNum").append("<option value='5'>5月</option>");$("#deadlineNum").append("<option value='6'>6月</option>");$("#deadlineNum").append("<option value='7'>7月</option>");$("#deadlineNum").append("<option value='8'>8月</option>");$("#deadlineNum").append("<option value='9'>9月</option>");$("#deadlineNum").append("<option value='10'>10月</option>");$("#deadlineNum").append("<option value='11'>11月</option>");$("#deadlineNum").append("<option value='12'>12月</option>");$("#deadlineNum").append("<option value='13'>13月</option>");$("#deadlineNum").append("<option value='14'>14月</option>");$("#deadlineNum").append("<option value='15'>15月</option>");$("#deadlineNum").append("<option value='16'>16月</option>");$("#deadlineNum").append("<option value='17'>17月</option>");$("#deadlineNum").append("<option value='18'>18月</option>");$("#deadlineNum").append("<option value='19'>19月</option>");$("#deadlineNum").append("<option value='20'>20月</option>");$("#deadlineNum").append("<option value='21'>21月</option>");$("#deadlineNum").append("<option value='22'>22月</option>");$("#deadlineNum").append("<option value='23'>23月</option>");$("#deadlineNum").append("<option value='24'>24月</option>");$("#deadlineNum").append("<option value='25'>25月</option>");$("#deadlineNum").append("<option value='26'>26月</option>");$("#deadlineNum").append("<option value='27'>27月</option>");$("#deadlineNum").append("<option value='28'>28月</option>");$("#deadlineNum").append("<option value='29'>29月</option>");$("#deadlineNum").append("<option value='30'>30月</option>");$("#deadlineNum").append("<option value='31'>31月</option>");$("#deadlineNum").append("<option value='32'>32月</option>");$("#deadlineNum").append("<option value='33'>33月</option>");$("#deadlineNum").append("<option value='34'>34月</option>");$("#deadlineNum").append("<option value='35'>35月</option>");$("#deadlineNum").append("<option value='36'>36月</option>")}}}function showHideBiao(){if(document.getElementById("biaozhun").style.display=="none"){document.getElementById("biaozhun").style.display="block"}var f=parseInt($("#amount").val());var r=parseInt($("#deadline").val());var l=parseInt($("#deadlineNum").val());var c=parseInt($("#repayment").val());var t=parseInt($("#rate").val());var k=t/12*0.01;var h="";var e=parseInt(0);var j=parseInt(0);var m=parseInt(0);document.getElementById("jishuan").innerHTML="";document.getElementById("jujianfwfei").innerHTML="￥"+(f*0.03);document.getElementById("danbaofei").innerHTML="￥"+(f*0.05);document.getElementById("disanfzhifu").innerHTML="￥"+(f*0.003);if(0==r){var q=new Date(new Date().getTime()+(86400000*l));var o=(t*0.01/360)*l;h+='<ul id="dltitlebg">';h+="<li>1</li>";h+="<li>"+q.getFullYear()+"-"+(q.getMonth()+1)+"-"+q.getDate()+"</li>";h+="<li>"+changeTwoDecimal(f+f*o)+"</li>";h+="<li>"+changeTwoDecimal(f)+"</li>";h+="<li>"+changeTwoDecimal(f*o)+"</li>";h+='<li id="borderli">0</li>';h+="</ul>";h+='<ul id="dltitlebg">';h+="<li>1</li>";h+='<li id="liwidth241"><strong>合计</strong></li>';h+="<li><strong>"+changeTwoDecimal(f+f*o)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(f)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(f*o)+"</strong></li>";h+='<li id="borderli"></li>';h+="</ul>";document.getElementById("jishuan").innerHTML=h}else{if(1==r){var n=0;if(0==c){var o=(t*0.01/12)*l;h+='<ul id="dltitlebg">';h+="<li>1</li>";h+="<li>"+setEndDate(new Date(),l)+"</li>";h+="<li>"+changeTwoDecimal(f+f*o)+"</li>";h+="<li>"+changeTwoDecimal(f)+"</li>";h+="<li>"+changeTwoDecimal(f*o)+"</li>";h+='<li id="borderli">0</li>';h+="</ul>";h+='<ul id="dltitlebg">';h+='<li id="liwidth241"><strong>合计</strong></li>';h+="<li><strong>"+changeTwoDecimal(f+f*o)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(f)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(f*o)+"</strong></li>";h+='<li id="borderli"></li>';h+="</ul>";document.getElementById("jishuan").innerHTML=h}else{if(2==c){for(n=1;n<=l;n++){var o=(t*0.01/12);h+='<ul id="dltitlebg">';h+="<li>"+n+"</li>";h+="<li>"+setEndDate(new Date(),n)+"</li>";m=m+f*o;if(n==l){j=j+f;h+="<li>"+changeTwoDecimal(f+f*o)+"</li>";h+="<li>"+changeTwoDecimal(f)+"</li>";h+="<li>"+changeTwoDecimal(f*o)+"</li>";h+='<li id="borderli">0</li>'}else{h+="<li>"+changeTwoDecimal(f*o)+"</li>";h+="<li>0</li>";h+="<li>"+changeTwoDecimal(f*o)+"</li>";h+='<li id="borderli">'+changeTwoDecimal(f)+"</li>"}h+="</ul>"}e=j+m;h+='<ul id="dltitlebg">';h+='<li id="liwidth241"><strong>合计</strong></li>';h+="<li><strong>"+changeTwoDecimal(e)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(j)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(m)+"</strong></li>";h+='<li id="borderli"></li>';document.getElementById("jishuan").innerHTML=h}else{if(1==c){var b=parseInt(0);var a=parseInt(0);var u=(t/12*0.01);var d=1+u;var g=d;var s=parseInt(0);for(n=1;n<l;n++){d=d*g}b=f*(u*d)/(d-1);s=f;var p=0;for(n=1;n<=l;n++){g=s*u;a=b-g;s=s-(a);e=e+a+g;m=m+g;j=j+a;h+='<ul id="dltitlebg">';h+="<li>"+n+"</li>";h+="<li>"+setEndDate(new Date(),n)+"</li>";h+="<li>"+changeTwoDecimal((a+g))+"</li>";if(n==l){h+="<li>"+changeTwoDecimal(a)+"</li>";h+="<li>"+changeTwoDecimal(g)+"</li>";h+='<li id="borderli">'+changeTwoDecimal(s)+"</li>"}else{h+="<li>"+changeTwoDecimal(a)+"</li>";h+="<li>"+changeTwoDecimal(g)+"</li>";h+='<li id="borderli">'+changeTwoDecimal(s)+"</li>"}h+="</ul>"}h+='<ul id="dltitlebg">';h+='<li id="liwidth241"><strong>合计</strong></li>';h+="<li><strong>"+changeTwoDecimal(e)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(j)+"</strong></li>";h+="<li><strong>"+changeTwoDecimal(m)+"</strong></li>";h+='<li id="borderli"></li>';document.getElementById("jishuan").innerHTML=h}}}}}}function changeTwoDecimal(b){var a=parseFloat(b);if(isNaN(a)){alert("function:changeTwoDecimal->parameter error");return false}var a=Math.round(b*100)/100;return formatMoney(a)};