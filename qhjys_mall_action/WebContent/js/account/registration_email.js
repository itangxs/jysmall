$(function(){$("#registrationByTel").removeClass("tabaction");$("#email").blur(function(){$("#email").next().remove();$("#email").attr("class","inputkk");var a=$('<label class="one1" style="width:180px;">请输入邮箱</label>');var c=$("#email").val().trim();var b=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;if(c==""){$("#email").after(a);$("#email").attr("class","inputkkred")}else{if(!b.test($("#email").val())){str="请输入正确的邮箱";a=$('<label class="one1" style="width:180px;">'+str+"</label>");$("#email").after(a);$("#email").attr("class","inputkkred")}}});$("#username").blur(function(){$("#username").next().remove();$("#username").attr("class","inputkk");var a=$('<label class="one1" style="width:180px;">请输入用户名</label>');var b=$("#username").val().trim();if(b==""){$("#username").after(a);$("#username").attr("class","inputkkred")}else{if($("#username").val().length>20){a=$('<label class="one1" style="width:180px;">长度不能大于20位！</label>');$("#username").after(a);$("#username").attr("class","inputkkred")}else{if($("#username").val().length<6){a=$('<label class="one1" style="width:180px;">长度不能小于6位！</label>');$("#username").after(a);$("#username").attr("class","inputkkred")}}}});$("#password").blur(function(){$("#password").next().remove();$("#password").attr("class","inputkk");var a=$('<label class="one1" style="width:180px;">请输入密码</label>');var f=$("#password").val().trim();if(f==""){$("#password").after(a);$("#password").attr("class","inputkkred")}else{if($("#password").val().length>20){var a=$('<label class="one1" style="width:180px;">长度不能大于20位</label>');$("#password").after(a);$("#password").attr("class","inputkkred")}else{var a=$('<div class="mimazhuangtai"><ul><li>弱</li><li>中</li><li>强</li><div class="clear"></div></ul></div>');$("#password").after(a);$("#password").attr("class","inputkkred")}}var c=/(?=.*[\d]+)(?=.*[a-zA-Z]+)(?=.*[^a-zA-Z0-9]+).{10,20}/;var b=/(?=.*[a-zA-Z]+)(?=.*[^a-zA-Z0-9]+).{10,20}/;var e=/(?=.*[\d]+)(?=.*[a-zA-Z]+).{10,20}/;var d=/(?=.*[\d]+)(?=.*[^a-zA-Z0-9]+).{10,20}/;if(c.test($("#password").val().trim())){$(".mimazhuangtai ul li").last().addClass("ruored")}else{if(e.test($("#password").val().trim())||d.test($("#password").val().trim())||b.test($("#password").val().trim())){$(".mimazhuangtai ul li").first().next().addClass("ruored")}else{$(".mimazhuangtai ul li").first().addClass("ruored")}}});$("#confirm_password").blur(function(){if($("#confirm_password").val().trim()!=$("#password").val().trim()){$("#confirm_password").next().remove();$("#confirm_password").attr("class","inputkk");var a=$('<label class="one1" style="width:180px;">两次密码不一致</label>');$("#confirm_password").after(a);$("#confirm_password").attr("class","inputkkred")}else{validate(this,"请再次输入密码",20)}});$("#registrationForm").submit(function(){$("#registrationForm label[class=one1]").remove();var b=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;if($("#email").val().trim()==""){var a=$('<label class="one1" style="width:180px;">请输入邮箱</label>');$("#email").after(a);$("#email").attr("class","inputkkred")}else{if(!b.test($("#email").val())){var d="请输入正确的邮箱";var a=$('<label class="one1" style="width:180px;">'+d+"</label>");$("#email").after(a);$("#email").attr("class","inputkkred")}}var a=$('<label class="one1" style="width:180px;">请输入用户名</label>');var c=$("#username").val().trim();if(c==""){$("#username").after(a);$("#username").attr("class","inputkkred")}else{if($("#username").val().length>20){a=$('<label class="one1" style="width:180px;">长度不能大于20位！</label>');$("#username").after(a);$("#username").attr("class","inputkkred")}else{if($("#username").val().length<6){a=$('<label class="one1" style="width:180px;">长度不能小于6位！</label>');$("#username").after(a);$("#username").attr("class","inputkkred")}}}var a=$('<label class="one1" style="width:180px;">请输入密码</label>');var c=$("#password").val().trim();if(c==""){$("#password").after(a);$("#password").attr("class","inputkkred")}else{if($("#password").val().length>20){var a=$('<label class="one1" style="width:180px;">长度不能大于20位</label>');$("#password").after(a);$("#password").attr("class","inputkkred")}}if($("#confirm_password").val().trim()!=$("#password").val().trim()){$("#confirm_password").next().remove();var a=$('<label class="one1" style="width:180px;">两次密码不一致</label>');$("#confirm_password").after(a);$("#confirm_password").attr("class","inputkkred")}else{validate("#confirm_password","请再次输入密码",20)}if($("#registrationForm label[class=one1]").length>0){return false}$("#password").val(md5($("#password").val()));$.ajax({async:false,type:"POST",url:"/account/insertUser.do",data:$(this).serialize(),success:function(e){if(e=="注册成功"){alert("注册成功");window.location.href="/account/login.do"}else{alert("用户名或邮箱已存在")}},error:function(f){alert("error");return false}});return false})});function validate(b,e,c){$(b).next().remove();$(b).attr("class","inputkk");var a=$('<label class="one1" style="width:180px;">'+e+"</label>");var d=$(b).val().trim();if(d==""){$(b).after(a);$(b).attr("class","inputkkred")}else{if($(b).val().length>c){e="长度不能大于"+c+"位！";a=$('<label class="one1" style="width:180px;">'+e+"</label>");$(b).after(a);$(b).attr("class","inputkkred")}}};